<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.32">
    <meta name="keywords" content="scratch,Scratch,少儿编程,编程,思维,教程,教育,学习"><script>var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?104260b4abdf491461f2e4360a755ff4";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();</script><title>高级篇——时光倒流 | Scratch 3 学习手册</title><meta name="description" content="时光不语，静待花开。">
    <link rel="modulepreload" href="/assets/app.bf2ec61c.js"><link rel="modulepreload" href="/assets/senior-10.html.5543e236.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/senior-10.html.d572c6dd.js">
    <link rel="stylesheet" href="/assets/style.b5235dab.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/images/logo-light.png" alt="Scratch 3 学习手册"><span class="site-name can-hide">Scratch 3 学习手册</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="软件使用"><span class="title">软件使用</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="软件使用"><span class="title">软件使用</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/" class="" aria-label="软件介绍"><!--[--><!--]--> 软件介绍 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/interface.html" class="" aria-label="软件操作"><!--[--><!--]--> 软件操作 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="积木介绍"><span class="title">积木介绍</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="积木介绍"><span class="title">积木介绍</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/code/base/" class="" aria-label="基础类型"><!--[--><!--]--> 基础类型 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/code/extend/" class="" aria-label="扩展类型"><!--[--><!--]--> 扩展类型 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/code/talk/" class="" aria-label="指令杂谈"><!--[--><!--]--> 指令杂谈 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="项目练习"><span class="title">项目练习</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="项目练习"><span class="title">项目练习</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/practice/explain/" class="" aria-label="练习说明"><!--[--><!--]--> 练习说明 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/practice/example/primary.html" class="" aria-label="练习案例"><!--[--><!--]--> 练习案例 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a href="/support/" class="" aria-label="支持"><!--[--><!--]--> 支持 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="软件使用"><span class="title">软件使用</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="软件使用"><span class="title">软件使用</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/" class="" aria-label="软件介绍"><!--[--><!--]--> 软件介绍 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/interface.html" class="" aria-label="软件操作"><!--[--><!--]--> 软件操作 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="积木介绍"><span class="title">积木介绍</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="积木介绍"><span class="title">积木介绍</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/code/base/" class="" aria-label="基础类型"><!--[--><!--]--> 基础类型 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/code/extend/" class="" aria-label="扩展类型"><!--[--><!--]--> 扩展类型 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/code/talk/" class="" aria-label="指令杂谈"><!--[--><!--]--> 指令杂谈 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="项目练习"><span class="title">项目练习</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="项目练习"><span class="title">项目练习</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/practice/explain/" class="" aria-label="练习说明"><!--[--><!--]--> 练习说明 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/practice/example/primary.html" class="" aria-label="练习案例"><!--[--><!--]--> 练习案例 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a href="/support/" class="" aria-label="支持"><!--[--><!--]--> 支持 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p class="sidebar-item sidebar-heading">练习说明 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/practice/explain/" class="sidebar-item" aria-label="练习说明"><!--[--><!--]--> 练习说明 <!--[--><!--]--></a><!----></li><li><a href="/practice/explain/step.html" class="sidebar-item" aria-label="练习步骤"><!--[--><!--]--> 练习步骤 <!--[--><!--]--></a><!----></li><li><a href="/practice/explain/tools.html" class="sidebar-item" aria-label="学习工具"><!--[--><!--]--> 学习工具 <!--[--><!--]--></a><!----></li><li><a href="/practice/explain/tips.html" class="sidebar-item" aria-label="小技巧"><!--[--><!--]--> 小技巧 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p class="sidebar-item sidebar-heading">练习案例 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/practice/example/primary.html" class="sidebar-item" aria-label="初级篇"><!--[--><!--]--> 初级篇 <!--[--><!--]--></a><!----></li><li><a href="/practice/example/middle.html" class="sidebar-item" aria-label="中级篇"><!--[--><!--]--> 中级篇 <!--[--><!--]--></a><!----></li><li><a href="/practice/example/senior.html" class="sidebar-item" aria-label="高级篇"><!--[--><!--]--> 高级篇 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="高级篇——时光倒流" tabindex="-1"><a class="header-anchor" href="#高级篇——时光倒流" aria-hidden="true">#</a> 高级篇——时光倒流</h1><h2 id="【疑惑篇】" tabindex="-1"><a class="header-anchor" href="#【疑惑篇】" aria-hidden="true">#</a> 【疑惑篇】</h2><p>点击<a href="/guide/stage.html#%E7%BB%BF%E6%97%97%E5%92%8C%E5%81%9C%E6%AD%A2%E6%8C%89%E9%92%AE" class="">绿旗按钮</a>开始游戏。</p><p>随着音乐拖动小螃蟹在舞台中任意移动，舞台中将留下小螃蟹移动过的痕迹。</p><p>音乐停止后，松开小螃蟹，随着音乐的反转，小螃蟹将自动沿着来时的路线时光倒流。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/Adyoa9.png" alt=""></p><p><a href="https://www.bilibili.com/video/BV1R3411A7i6/" target="_blank" rel="noopener noreferrer">视频演示<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p><a href="https://scratch.shenxinduo.com/examples/3-%E6%97%B6%E5%85%89%E5%80%92%E6%B5%81.html" target="_blank" rel="noopener noreferrer">亲自操作<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h2 id="【线索篇】" tabindex="-1"><a class="header-anchor" href="#【线索篇】" aria-hidden="true">#</a> 【线索篇】</h2><h3 id="案例分析" tabindex="-1"><a class="header-anchor" href="#案例分析" aria-hidden="true">#</a> 案例分析</h3><p>它们发生的场景是什么？</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/02/24/MtJOsX.png" alt=""></p><p>每个场景中有哪些角色？</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/02/24/2wpzSA.png" alt=""></p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/02/23/sVgm3D.png" alt=""></p><p>每个场景中的每个角色在做什么？</p><ol><li><p>点击绿旗按钮，开始播放背景音乐，玩家拖动螃蟹在舞台上移动，舞台上画出螃蟹的移动轨迹。</p></li><li><p>背景音乐停止，玩家停止拖动螃蟹，螃蟹说出“时光倒流”。</p></li><li><p>反向加速播放背景音乐，螃蟹沿着拖动轨迹反向移动，舞台上的移动轨迹随着螃蟹的移动消失。</p></li></ol><h3 id="积木提示" tabindex="-1"><a class="header-anchor" href="#积木提示" aria-hidden="true">#</a> 积木提示</h3><p><a href="/code/base/events.html#%E5%BD%93%E7%BB%BF%E6%97%97%E8%A2%AB%E7%82%B9%E5%87%BB" class="">当绿旗被点击</a></p><p><a href="/code/base/motion.html#%E7%A7%BB%E5%88%B0x-0-y-0" class="">移到x：(0) y：(0)</a></p><p><a href="/code/base/motion.html#%E7%A7%BB%E5%88%B0-%E9%9A%8F%E6%9C%BA%E4%BD%8D%E7%BD%AE" class="">移到([随机位置])</a></p><p><a href="/code/base/motion.html#x%E5%9D%90%E6%A0%87" class="">x坐标</a></p><p><a href="/code/base/motion.html#y%E5%9D%90%E6%A0%87" class="">y坐标</a></p><p><a href="/code/base/looks.html#%E8%AF%B4-%E4%BD%A0%E5%A5%BD-2-%E7%A7%92" class="">说(你好！)(2)秒</a></p><p><a href="/code/base/looks.html#%E9%9A%90%E8%97%8F" class="">隐藏</a></p><p><a href="/code/base/sound.html#%E6%92%AD%E6%94%BE%E5%A3%B0%E9%9F%B3-%E5%96%B5-%E7%AD%89%E5%BE%85%E6%92%AD%E5%AE%8C" class="">播放声音([喵])等待播完</a></p><p><a href="/code/base/sound.html#%E6%92%AD%E6%94%BE%E5%A3%B0%E9%9F%B3-%E5%96%B5" class="">播放声音([喵])</a></p><p><a href="/code/base/events.html#%E5%BD%93%E6%8E%A5%E6%94%B6%E5%88%B0-%E6%B6%88%E6%81%AF1" class="">当接收到[消息1]</a></p><p><a href="/code/base/events.html#%E5%B9%BF%E6%92%AD-%E6%B6%88%E6%81%AF1" class="">广播[消息1]</a></p><p><a href="/code/base/control.html#%E9%87%8D%E5%A4%8D%E6%89%A7%E8%A1%8C-10-%E6%AC%A1-1" class="">重复执行(10)次</a></p><p><a href="/code/base/control.html#%E9%87%8D%E5%A4%8D%E6%89%A7%E8%A1%8C-1" class="">重复执行</a></p><p><a href="/code/base/control.html#%E5%A6%82%E6%9E%9C-%E9%82%A3%E4%B9%88-1" class="">如果&lt;&gt;那么</a></p><p><a href="/code/base/control.html#%E9%87%8D%E5%A4%8D%E6%89%A7%E8%A1%8C%E7%9B%B4%E5%88%B0" class="">重复执行直到&lt;&gt;</a></p><p><a href="/code/base/control.html#%E5%81%9C%E6%AD%A2-%E5%85%A8%E9%83%A8%E8%84%9A%E6%9C%AC" class="">停止[全部脚本]</a></p><p><a href="/code/base/sensing.html#%E5%B0%86%E6%8B%96%E5%8A%A8%E6%A8%A1%E5%BC%8F%E8%AE%BE%E4%B8%BA-%E5%8F%AF%E6%8B%96%E5%8A%A8" class="">将拖动模式设为[可拖动]</a></p><p><a href="/code/base/operators.html#%E7%AD%89%E4%BA%8E" class="">等于</a></p><p><a href="/code/base/operators.html#%E6%88%96" class="">或</a></p><p><a href="/code/base/operators.html#%E4%B8%8D%E6%88%90%E7%AB%8B" class="">不成立</a></p><p><a href="/code/base/variables.html" class="">变量</a></p><p><a href="/code/base/my-blocks.html" class="">自制积木</a></p><p><a href="/code/extend/pen.html" class="">画笔</a></p><h3 id="解决篇" tabindex="-1"><a class="header-anchor" href="#解决篇" aria-hidden="true">#</a> 解决篇</h3><p>2000年千禧之际，一个头戴鸭舌帽的腼腆男孩发行了自己的第一张个人专辑《Jay》，一段属于他的华语音乐时代就此开始。这张专辑中有一首我很喜欢的歌《反方向的钟》，歌曲的MV拍的很特别。镜头里，所有事物像是处在一个与现实世界运行方向相反的时空，街上的行人和车都在倒退着前行。20年后一位喜欢研究时间的导演克里斯托弗·诺兰将这种时空扩大，拍出了一部电影《信条（Tenet）》。</p><p>这一次，我们就来利用Scratch制作一个属于自己的时光倒流小游戏。</p><p>第一步，先添加我们时光倒流的场景，Underwater1。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/02/24/MtJOsX.png" alt=""></p><p>第二步，添加发生时光倒流的角色。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/02/24/2wpzSA.png" alt=""></p><p>你可能在案例分析中发现，除了螃蟹之外，我还保留了默认的小猫角色，你也可以将它保留下来，之后我们实现程序时，你就会看见它的作用是什么。</p><p>第三步，使用指令积木实现程序。</p><p>这个小游戏的运行过程看上去很简单，但是制作时会有两个难点。第一个难点是，如何在舞台上画出螃蟹的拖行轨迹？第二个难点是，如何制造时光倒流的效果？</p><p><strong>1. 点击绿旗按钮，开始播放背景音乐，玩家拖动螃蟹在舞台上移动，舞台上画出螃蟹的移动轨迹。</strong></p><p>首先，点击绿旗按钮后，开始播放背景音乐。这一次的音乐是螃蟹开始时光倒流的信号，只用播放一次。音乐播放时，玩家可以自由拖动螃蟹在舞台上移动。音乐停止时，就将发生时光倒流。</p><p>你同样可以使用舞台来播放背景音乐，只是你需要思考一个问题，当舞台播放音乐时，螃蟹如何才能知道音乐是否播放结束？</p><p>你可以从Scratch中选择或者上传一首自己喜欢的音乐，时间不用太长。<a href="/code/base/events.html#%E5%BD%93%E7%BB%BF%E6%97%97%E8%A2%AB%E7%82%B9%E5%87%BB" class="">当绿旗被点击</a>后让舞台播放音乐。想一想应该使用哪个播放声音的积木？为什么？</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/Dca3D3.png" alt=""></p><p>螃蟹<a href="/code/base/events.html#%E5%BD%93%E7%BB%BF%E6%97%97%E8%A2%AB%E7%82%B9%E5%87%BB" class="">当绿旗被点击</a>后，可以将它移动到舞台中央，等待玩家拖动。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/OETUdU.png" alt=""></p><p>不知道在之前的学习过程中你有没有发现，当你让舞台进入<strong>全屏模式</strong>时，默认情况下你是无法拖动角色的。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/VS1qeF.png" alt=""></p><p>在侦测分类中有一个<a href="/code/base/sensing.html#%E5%B0%86%E6%8B%96%E5%8A%A8%E6%A8%A1%E5%BC%8F%E8%AE%BE%E4%B8%BA-%E5%8F%AF%E6%8B%96%E5%8A%A8" class="">将拖动模式设为[可拖动]</a>积木，积木参数有两个选项，<strong>可拖动</strong>和<strong>不可拖动</strong>。</p><p>如果你将参数选为可拖动，并对某个角色使用该积木后，你就可以在全屏模式下用鼠标拖动它。如果参数选择了不可拖动，角色就会变回默认状态，不能在使用鼠标拖动。</p><p>现在你就可以让螃蟹<a href="/code/base/sensing.html#%E5%B0%86%E6%8B%96%E5%8A%A8%E6%A8%A1%E5%BC%8F%E8%AE%BE%E4%B8%BA-%E5%8F%AF%E6%8B%96%E5%8A%A8" class="">将拖动模式设为[可拖动]</a>。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/BVLePo.png" alt=""></p><p>进入全屏模式下点击绿旗按钮进行测试，现在音乐响起的同时，你可以拖拽着螃蟹在舞台上到处乱动了。</p><p>接下来，还剩下一个问题，螃蟹在舞台被拖动的同时，如何留下它的足迹？</p><p>我相信你肯定能想到使用画笔来画出它的足迹，具体应该如何画呢？</p><p>你先将舞台<a href="/code/extend/pen.html#%E5%85%A8%E9%83%A8%E6%93%A6%E9%99%A4" class="">全部擦除</a>干净。接着使用<a href="/code/extend/pen.html#%E5%B0%86%E7%AC%94%E7%9A%84%E9%A2%9C%E8%89%B2%E8%AE%BE%E4%B8%BA-%E9%A2%9C%E8%89%B2" class="">将笔的颜色设为(颜色)</a>积木，选择一种自己喜欢的颜色。最后，使用<a href="/code/extend/pen.html#%E8%90%BD%E7%AC%94" class="">落笔</a>积木开始画画。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/HKmeY5.png" alt=""></p><p>点击绿旗按钮进行测试，你会发现当你拖动螃蟹时，舞台上并没有画出任何东西。这是因为使用画笔分类中的<a href="/code/extend/pen.html#%E8%90%BD%E7%AC%94" class="">落笔</a>积木后，只有当角色使用运动分类中的积木在舞台上移动时，才会留下它移动的痕迹。</p><p>问题来了，既然螃蟹现在是被鼠标拖着走，那怎么可能同时又让它被移动积木移动呢？</p><p>有没有想到我们之前所保留的另外一个小猫角色。它的作用就是在舞台上画出移动痕迹。需要注意的是，小猫留下的痕迹需要和螃蟹保持一致，这样当你把小猫隐藏起来时，玩家所看见的就像是拖动螃蟹后留下的痕迹。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/lWDVWx.png" alt=""></p><p>接下来你需要解决的问题是，如何让小猫跟随螃蟹移动？我相信你一定可以想出很多不同的方法。</p><p>例如，使用<a href="/code/base/motion.html#%E7%A7%BB%E5%88%B0-%E9%9A%8F%E6%9C%BA%E4%BD%8D%E7%BD%AE" class="">移到([随机位置])</a>积木，或者使用<a href="/code/base/motion.html#%E7%A7%BB%E5%88%B0x-0-y-0" class="">移到x：(0) y：(0)</a>积木配合<a href="/code/base/sensing.html#%E8%88%9E%E5%8F%B0-%E7%9A%84-%E8%83%8C%E6%99%AF%E7%BC%96%E5%8F%B7" class="">([舞台])的[背景编号]</a>积木。或者能不能考虑自己定义两个变量，让螃蟹将自己的坐标设置给小猫使用。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/5EMur1.png" alt=""></p><p>点击绿旗按钮进行测试，当你拖动螃蟹后，舞台上就会留下它被拖动的足迹。测试时你必须进入全屏模式，否则在舞台上留下的就会是一条一条直线所拼接的足迹。</p><p><strong>2. 背景音乐停止，玩家停止拖动螃蟹，螃蟹说出“时光倒流”。</strong></p><p>音乐停止，马上就要发生时光倒流了，玩家不能在继续拖动螃蟹，你要使用<a href="/code/base/sensing.html#%E5%B0%86%E6%8B%96%E5%8A%A8%E6%A8%A1%E5%BC%8F%E8%AE%BE%E4%B8%BA-%E5%8F%AF%E6%8B%96%E5%8A%A8" class="">将拖动模式设为[不可拖动]</a>积木让螃蟹重新变为不可拖动状态。可是，螃蟹如何知道音乐停止了呢？</p><p>还记不记得在第一步中我们使用了<a href="/code/base/sound.html#%E6%92%AD%E6%94%BE%E5%A3%B0%E9%9F%B3-%E5%96%B5-%E7%AD%89%E5%BE%85%E6%92%AD%E5%AE%8C" class="">播放声音([喵])等待播完</a>积木来播放背景音乐，目的就是为了在音乐播完后可以通知螃蟹开始时光倒流。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/FjG2uw.png" alt=""></p><p>螃蟹在接收到时光倒流的通知后，你可以<a href="/code/base/sensing.html#%E5%B0%86%E6%8B%96%E5%8A%A8%E6%A8%A1%E5%BC%8F%E8%AE%BE%E4%B8%BA-%E5%8F%AF%E6%8B%96%E5%8A%A8" class="">将拖动模式设为[不可拖动]</a>，然后说出“时光倒流”。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/slaPk7.png" alt=""></p><p><strong>3. 反向加速播放背景音乐，螃蟹沿着拖动轨迹反向移动，舞台上的移动轨迹随着螃蟹的移动消失。</strong></p><p>终于到了最后一步，螃蟹要开始时光倒流了。为了能表现出时光倒流的效果，你可以将之前的音乐倒着播放一遍。如何操作呢？</p><p>先将原本的音乐复制一份。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/pGCXel.png" alt=""></p><p>接着选中复制的音乐，点击右边的反转工具，此时被选择的音乐就会反转播放。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/cHDcdd.png" alt=""></p><p>被反转的音乐默认会和原本的音乐时长一致。为了表现出一种时光正在加速倒流的感觉，你还可以使用快一点工具，将音乐的时长缩小，它听上去就会变得更急促。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/oX836z.png" alt=""></p><p>最后使用<a href="/code/base/sound.html#%E6%92%AD%E6%94%BE%E5%A3%B0%E9%9F%B3-%E5%96%B5" class="">播放声音([喵])</a>积木将我们修改好的音乐播放出来即可。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/Bwqctz.png" alt=""></p><p>现在只剩下最后一步了，螃蟹沿着之前的轨迹反向移动，同时舞台上的足迹也会随着螃蟹的移动逐渐消失。</p><p>此时你会遇到一个问题，之前螃蟹移动时，你是使用鼠标随机拖动螃蟹在舞台上移动，你要如何让它自己反向走回去呢？</p><p>要解决这个问题，你需要知道螃蟹之前走过了哪些地方？</p><p>想象一下，当你从家里出门准备去一个陌生的地方办事时，你会怎么做？你是不是会先提前找到去那个地方的路线，并将路线记在脑子里，或者利用纸笔、手机记录下来。在你办完事想要回家时，只需要沿着记录的路线反向走回去即可。你所记录的路线对应到螃蟹身上时，就是它被拖动过程中的坐标值。</p><p>想一想，你只要将螃蟹被拖动过程中的坐标都记录下来，时光倒流开始后，你是不是就可以按照记录的坐标反向移动回去了？</p><p>现在你要完成的第一件事，就是记录下螃蟹被拖动过程中的坐标值。</p><p>螃蟹在被拖动的过程中，x坐标和y坐标都会不停的发生变化，所以你需要将它们记录在列表中。还记不记得在<a href="/practice/example/senior.html#_9-%E5%8D%95%E4%BD%8D%E6%8D%A2%E7%AE%97" class="">单位换算</a>中，你已经学会了使用多个列表来记录一组相关联的数据。这一次同样可以建立两个列表，分别存储螃蟹移动过程中的x坐标和y坐标。当时光倒流开始时，只需要通过相同的编号将它们一组一组的取出来使用即可。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/PYvXoA.png" alt=""></p><p>在哪记录螃蟹的x坐标和y坐标？只需要<a href="/code/base/events.html#%E5%BD%93%E7%BB%BF%E6%97%97%E8%A2%AB%E7%82%B9%E5%87%BB" class="">当绿旗被点击</a>后不停地向列表中加入螃蟹的坐标即可。当然别忘了每次游戏开始时，先将两个列表全部清空。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/vSq4at.png" alt=""></p><p>点击绿旗按钮测试一下，你会发现列表中会有很多重复的坐标值。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/2nwoQG.png" alt=""></p><p>这些重复的坐标是因为螃蟹停在原地造成的。</p><p>一个列表中最多只能保持200000个东西。假如说你选择的音乐很长，如果有很多重复的东西占用列表的话，列表会很快被占满。在时光倒流时，这些重复的坐标也会让螃蟹停在原地不动，减慢时光倒流的速度。因此，你可以想个办法去掉重复的坐标值。</p><p>具体怎么做呢？</p><p>实际上很简单，你只需要每次在向列表中添加坐标前，判断一下螃蟹当前的x坐标和y坐标，是否和上一次的x坐标和y坐标值一样？如果x和y坐标都一样，说明螃蟹停在了原地没动，就不需要将它们加入列表。如果x坐标或y坐标中有任意一个和上一次不一样，说明螃蟹的位置发生了改变，需要将它们加入列表中。</p><p>在这里你可以建立两个变量用来存储螃蟹上一次的x和y坐标。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/Gknnyt.png" alt=""></p><p>螃蟹的初始位置是舞台中央，所以也将x坐标和y坐标的变量值初始设为0。接着，在<a href="/code/base/control.html#%E9%87%8D%E5%A4%8D%E6%89%A7%E8%A1%8C-1" class="">重复执行</a>积木中使用运动分类的<a href="/code/base/motion.html#x%E5%9D%90%E6%A0%87" class="">x坐标</a>积木和<a href="/code/base/motion.html#y%E5%9D%90%E6%A0%87" class="">y坐标</a>积木与两个变量进行判断，如果有任意一个坐标值不相等，那么说明螃蟹位置发生了改变，将当前的坐标值加入列表中，再将当前的坐标值设为x坐标和y坐标的变量值，用作下一次的判断使用。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/M2V8Qr.png" alt=""></p><p>重新点击绿旗按钮进行测试，当螃蟹停止移动时，就不会再有重复的坐标值被加入列表中了。</p><p>现在已经有了螃蟹走过的坐标值，接下来就可以在时光倒流时，将它们依次取出来，让螃蟹反向移动了。具体如何做呢？</p><p>首先，开始时光倒流时，需要先使用<a href="/code/base/control.html#%E5%81%9C%E6%AD%A2-%E5%85%A8%E9%83%A8%E8%84%9A%E6%9C%AC" class="">停止[该角色的其他脚本]</a>积木，让螃蟹停止往列表中增加新的坐标值。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/Ssi8vn.png" alt=""></p><p>接着，你需要从列表的最后，倒着取出每一个坐标值，让螃蟹按照取出的坐标进行移动。</p><p>如何倒着取呢？</p><p>很简单，与之前从1个开始，按顺序依次取出列表中的每一个值类似。先建立一个索引变量i，之前是把索引变量先设为1，然后依次递增。现在要从最后倒着取，就要把索引先设为列表的最后一个编号值，也就是列表的项目数，通过<a href="/code/base/variables.html#%E5%88%97%E8%A1%A8-%E7%9A%84%E9%A1%B9%E7%9B%AE%E6%95%B0" class="">[列表]的项目数</a>积木获取。然后编号需要依次递减，使用<a href="/code/base/variables.html#%E5%B0%86-%E6%88%91%E7%9A%84%E5%8F%98%E9%87%8F-%E5%A2%9E%E5%8A%A0-1" class="">将[我的变量]增加(-1)</a>来完成。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/3eoqC2.png" alt=""></p><p>点击绿旗按钮测试一下，现在时光倒流时，螃蟹已经可以沿着轨迹反向移动。</p><p>还剩下最后一个问题，舞台上的轨迹如何随着螃蟹的移动逐渐消失呢？</p><p>想要清除舞台上的轨迹，只有使用<a href="/code/extend/pen.html#%E5%85%A8%E9%83%A8%E6%93%A6%E9%99%A4" class="">全部擦除</a>积木这一种方式。可是这个积木并不会顺着螃蟹倒退的轨迹一点一点的清除舞台上的足迹，而是会一次性将它们全部擦除掉。</p><p>应该如何解决这个问题？</p><p>想要解决这个问题，你可以换一个角度来进行思考。</p><p>你在舞台上所看见的轨迹，实际上是与列表中所有坐标值移动后所画出来的轨迹一模一样。</p><p>时光倒流之前，列表中的坐标值在不断增加，舞台上的轨迹也在不断变长。如果列表中的坐标值逐渐减少，那舞台上所画出来的轨迹也会逐渐变短。</p><p>所以想要让舞台上的轨迹随着螃蟹的移动逐渐消失，需要分两步来完成。</p><p>第一步，螃蟹倒退时，删除列表中已经退回的坐标值。第二步，让小猫不停的先清除舞台上的痕迹，再重新画出列表中所有剩余坐标的移动轨迹。</p><p>具体怎么实现呢？在这里有两种做法。</p><p>第一种，螃蟹保持现在的指令不变。此时，它所用的索引变量i，也就代表了剩余轨迹的最后一个坐标值。小猫只需要在接收到时光倒流后，重复执行全部擦除和画线操作即可。具体画线的操作，就是让小猫从列表的第1项坐标开始移动，一直移动到第i项。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/XFlrS2.png" alt=""></p><p>点击绿旗按钮进行测试，你会发现有两个问题。</p><p>第一个问题是，音乐停止螃蟹说话时，舞台上的轨迹会消失不见。这是因为小猫是以i的变量值作为轨迹的最后一个移动坐标，在螃蟹的指令串中，i的初始值设置被放在说话积木之后。要修改这个bug，只需要将i变量的初始值设置放在说话之前即可。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/PdKmIA.png" alt=""></p><p>第二个问题，舞台上的轨迹并没有按照我们所设想的慢慢减少。要解决这个问题，就需要你对自制积木中运行时不刷新屏幕选项和画笔的使用很熟悉。具体的使用方法，可以参考我在<a href="/code/extend/pen.html#%E7%94%BB%E7%AC%94%E4%B8%8E%E5%B1%8F%E5%B9%95%E5%88%B7%E6%96%B0" class="">少儿编程Scratch3.0教程——扩展篇（画笔）</a>中的讲解。</p><p>当你使用之前的指令串，让小猫获取列表中的坐标值，画出螃蟹的移动轨迹时，舞台上会将小猫移动的过程全部展示出来。但是我们现在想要看到的，并不是画线的过程，而是已经完整画好的线。</p><p>为了实现这个目标，你需要新建一个自制积木，可以取名叫“画轨迹”，勾选上<strong>运行时不刷新屏幕选项</strong>。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/63d02O.png" alt=""></p><p>接着，将小猫按照列表中的坐标移动画线的指令串移入该自制积木中。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/9LD3N4.png" alt=""></p><p>重新点击绿旗按钮重新测试，这一次你会看到舞台上的轨迹会随着螃蟹的移动逐渐消失。</p><p>这是因为使用自制积木后，小猫在每一次重复执行画轨迹时，都会一次性将完整的轨迹画出来。而螃蟹反向移动的过程中，i变量所代表的坐标编号会逐渐减小，也就是说每一次画出的完整轨迹会逐渐减少。</p><p>以上就是第一种，通过变量i代表轨迹最后的坐标位置，从而实现轨迹逐渐消失的方式。接下来，看看第二种。</p><p>既然螃蟹反向移动时，就是在减少列表中坐标值的过程，那现在你可以做一件事。每次让螃蟹先移动到列表中最后一个坐标位置，接着再将最后一个坐标值从列表中删除。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/rCHxCc.png" alt=""></p><p>这样一来，列表中剩下的就总是螃蟹还未倒退的坐标。小猫每次只需要将列表中的完整轨迹画出来即可。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/Szd2ON.png" alt=""></p><p>最后，当螃蟹删除完列表中所有坐标值，回到舞台中央时，可以使用<a href="/code/base/control.html#%E5%81%9C%E6%AD%A2-%E5%85%A8%E9%83%A8%E8%84%9A%E6%9C%AC" class="">停止[全部脚本]</a>积木，停止所有指令，结束游戏。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/ESDUUS.png" alt=""></p><p>如果你观察一下小猫两个指令串的作用，你会发现它们的作用都是在让小猫画轨迹，因此可以将它们合并为一个指令串使用。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/gy29wh.png" alt=""></p><p>以上，你就完成了时光倒流的小游戏。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/8SZXHb.png" alt=""></p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/lx00L5.png" alt=""></p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/b5ALAo.png" alt=""></p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/11/07/U8njGb.png" alt=""></p><p>想看更多学习案例，欢迎点击查看<a href="https://scratch.shenxinduo.com/" target="_blank" rel="noopener noreferrer">《Scratch 3学习手册》<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>。</p><p>想要获取所有案例源码和素材，以及获得我对你在学习中所遇问题的一对一解答，欢迎加入<a href="/support/#%E4%BB%98%E8%B4%B9%E7%A4%BE%E7%BE%A4" class="">石头解忧杂货店</a>。</p><p><img src="https://qiniu.shenxinduo.com/shenxinduo/2022/06/15/知识星球-横版.jpeg" alt=""></p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: ">lanheixingkong</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.bf2ec61c.js" defer></script>
  </body>
</html>
